"use strict";
/// <reference types="@cloudflare/workers-types" />
Object.defineProperty(exports, "__esModule", { value: true });
exports.drizzle = void 0;
const logger_1 = require("../logger");
const db_1 = require("../sqlite-core/db");
const dialect_1 = require("../sqlite-core/dialect");
const session_1 = require("./session");
function drizzle(client, config = {}) {
    const dialect = new dialect_1.SQLiteAsyncDialect();
    let logger;
    if (config.logger === true) {
        logger = new logger_1.DefaultLogger();
    }
    else if (config.logger !== false) {
        logger = config.logger;
    }
    const session = new session_1.SQLiteD1Session(client, dialect, { logger });
    return new db_1.BaseSQLiteDatabase(dialect, session);
}
exports.drizzle = drizzle;
//# sourceMappingURL=driver.js.map